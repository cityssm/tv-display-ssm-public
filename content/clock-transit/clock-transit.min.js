tvDisplay.tvContent=function(){function h(a){return("0"+a.toString()).slice(-2)}function k(a){var e=a.getFullYear()+"/"+h(d.januaryIsOne?a.getMonth()+1:a.getMonth())+"/"+h(a.getDate());if(d.hasOwnProperty("schedule_date")&&d.schedule_date.hasOwnProperty(e))return d.schedules[d.schedule_date[e]];a=a.getDay().toString();return d.hasOwnProperty("schedule_day")&&d.schedule_day.hasOwnProperty(a)?d.schedules[d.schedule_day[a]]:(a=d.schedule_default)?d.schedules[a]:[]}function l(a,e){for(var c=h(e.getHours())+
":"+h(e.getMinutes()),b=0,d=a.length;b<d;b+=1){var f=("0"+a[b]).slice(-5);if(f>=c)return c=f.split(":"),b=new Date(e.getTime()),b.setHours(parseInt(c[0])),b.setMinutes(parseInt(c[1])),b}return null}function m(){var a=new Date,e="AM",c=a.getHours();12<=c?(e="PM",12<c&&(c-=12)):0===c&&(c=12);p.innerHTML=c+":"+h(a.getMinutes())+" "+e;var c=null,e=d.hasOwnProperty("scheduleWindowMinutes")?d.scheduleWindowMinutes:0,b=new Date(a.getTime()-6E4*e),g=k(b);g&&0<g.length&&(c=l(g,b));null===c&&(b=new Date(b.getTime()),
b.setHours(0),b.setMinutes(0),b.setSeconds(0),b.setDate(b.getDate()+1),(g=k(b))&&0<g.length&&(c=l(g,b)));null===c?f.innerText="unavailable":(a=Math.floor((c.getTime()-a.getTime())/6E4),0>=a?f.innerText="right now":a<=e?f.innerText="preparing to depart":60<=a?f.innerText="in over an hour":f.innerHTML="in "+a+" minute"+(1===a?"":"s"))}var n=null,d={},p=tvDisplay.contentContainer.getElementsByClassName("clock-time")[0],f=tvDisplay.contentContainer.getElementsByClassName("clock-departure")[0];return{init:function(a){a=
tvDisplay.getContentProperty(a,"remoteURL")||"";axios.get(a+"content/clock-transit/schedule.json",{responseType:"json",params:{_:Math.floor(Date.now()/36E5)}}).then(function(a){return a.data}).then(function(a){d=a;m();n=window.setInterval(m,1E4)})["catch"](function(){try{window.console.error("clock-transit: Unable to load schedule.json")}catch(e){}tvDisplay.next()})},destroy:function(){try{window.clearInterval(n)}catch(a){}}}}();
